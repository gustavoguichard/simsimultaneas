(function(a){inlineEditTax={init:function(){var b=this,c=a("#inline-edit");b.type=a("#the-list").attr("class").substr(5);b.what="#"+b.type+"-";a(".editinline").live("click",function(){inlineEditTax.edit(this);return!1});c.keyup(function(a){if(a.which==27)return inlineEditTax.revert()});a("a.cancel",c).click(function(){return inlineEditTax.revert()});a("a.save",c).click(function(){return inlineEditTax.save(this)});a("input, select",c).keydown(function(a){if(a.which==13)return inlineEditTax.save(this)});a('#posts-filter input[type="submit"]').mousedown(function(a){b.revert()})},toggle:function(b){var c=this;a(c.what+c.getId(b)).css("display")=="none"?c.revert():c.edit(b)},edit:function(b){var c=this,d;c.revert();typeof b=="object"&&(b=c.getId(b));d=a("#inline-edit").clone(!0),rowData=a("#inline_"+b);a("td",d).attr("colspan",a(".widefat:first thead th:visible").length);a(c.what+b).hasClass("alternate")&&a(d).addClass("alternate");a(c.what+b).hide().after(d);a(':input[name="name"]',d).val(a(".name",rowData).text());a(':input[name="slug"]',d).val(a(".slug",rowData).text());a(d).attr("id","edit-"+b).addClass("inline-editor").show();a(".ptitle",d).eq(0).focus();return!1},save:function(b){var c,d,e=a('input[name="taxonomy"]').val()||"";typeof b=="object"&&(b=this.getId(b));a("table.widefat .inline-edit-save .waiting").show();c={action:"inline-save-tax",tax_type:this.type,tax_ID:b,taxonomy:e};d=a("#edit-"+b+" :input").serialize();c=d+"&"+a.param(c);a.post(ajaxurl,c,function(c){var d,e;a("table.widefat .inline-edit-save .waiting").hide();if(c)if(-1!=c.indexOf("<tr")){a(inlineEditTax.what+b).remove();e=a(c).attr("id");a("#edit-"+b).before(c).remove();d=e?a("#"+e):a(inlineEditTax.what+b);d.hide().fadeIn()}else a("#edit-"+b+" .inline-edit-save .error").html(c).show();else a("#edit-"+b+" .inline-edit-save .error").html(inlineEditL10n.error).show()});return!1},revert:function(){var b=a("table.widefat tr.inline-editor").attr("id");if(b){a("table.widefat .inline-edit-save .waiting").hide();a("#"+b).remove();b=b.substr(b.lastIndexOf("-")+1);a(this.what+b).show()}return!1},getId:function(b){var c=b.tagName=="TR"?b.id:a(b).parents("tr").attr("id"),d=c.split("-");return d[d.length-1]}};a(document).ready(function(){inlineEditTax.init()})})(jQuery);