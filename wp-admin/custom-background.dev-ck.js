var farbtastic,pickColor;(function(a){var b="";pickColor=function(c){farbtastic.setColor(c);a("#background-color").val(c);a("#custom-background-image").css("background-color",c);b&&c===b||!b&&(""===c||"#"===c)?a("#clearcolor").hide():a("#clearcolor").show()};a(document).ready(function(){b=a("#defaultcolor").val();a("#pickcolor").click(function(){a("#colorPickerDiv").show();return!1});a("#clearcolor a").click(function(a){pickColor(b);a.preventDefault()});a("#background-color").keyup(function(){var b=a("#background-color").val(),c=b;c.charAt(0)!="#"&&(c="#"+c);c=c.replace(/[^#a-fA-F0-9]+/,"");c!=b&&a("#background-color").val(c);(c.length==4||c.length==7)&&pickColor(c)});a('input[name="background-position-x"]').change(function(){a("#custom-background-image").css("background-position",a(this).val()+" top")});a('input[name="background-repeat"]').change(function(){a("#custom-background-image").css("background-repeat",a(this).val())});farbtastic=a.farbtastic("#colorPickerDiv",function(a){pickColor(a)});pickColor(a("#background-color").val());a(document).mousedown(function(){a("#colorPickerDiv").each(function(){var b=a(this).css("display");b=="block"&&a(this).fadeOut(2)})})})})(jQuery);