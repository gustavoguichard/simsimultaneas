function quicktags(a){return new QTags(a)}function edInsertContent(a,b){return QTags.insertContent(b)}function edButton(a,b,c,d,e,f){return QTags.addButton(a,b,c,d,e,"",-1)}var QTags,edButtons=[],edCanvas,edAddTag=function(){},edCheckOpenTags=function(){},edCloseAllTags=function(){},edInsertImage=function(){},edInsertLink=function(){},edInsertTag=function(){},edLink=function(){},edQuickLink=function(){},edRemoveTag=function(){},edShowButton=function(){},edShowLinks=function(){},edSpell=function(){},edToolbar=function(){};(function(){var a=function(b){var c,d,e;if(typeof jQuery!="undefined")jQuery(document).ready(b);else{c=a;c.funcs=[];c.ready=function(){if(!c.isReady){c.isReady=!0;for(d=0;d<c.funcs.length;d++)c.funcs[d]()}};c.isReady?b():c.funcs.push(b);if(!c.eventAttached){if(document.addEventListener){e=function(){document.removeEventListener("DOMContentLoaded",e,!1);c.ready()};document.addEventListener("DOMContentLoaded",e,!1);window.addEventListener("load",c.ready,!1)}else if(document.attachEvent){e=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",e);c.ready()}};document.attachEvent("onreadystatechange",e);window.attachEvent("onload",c.ready);(function(){try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,50);return}c.ready()})()}c.eventAttached=!0}}},b=function(){var a=new Date,b;b=function(a){var b=a.toString();b.length<2&&(b="0"+b);return b};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"+00:00"}(),c;c=QTags=function(b){if(typeof b=="string")b={id:b};else if(typeof b!="object")return!1;var d=this,e=b.id,f=document.getElementById(e),g="qt_"+e,h,i,j;if(!e||!f)return!1;d.name=g;d.id=e;d.canvas=f;d.settings=b;if(e!="content"||typeof adminpage!="string"||adminpage!="post-new-php"&&adminpage!="post-php")j=g+"_toolbar";else{edCanvas=f;j="ed_toolbar"}h=document.createElement("div");h.id=j;h.className="quicktags-toolbar";f.parentNode.insertBefore(h,f);d.toolbar=h;i=function(a){a=a||window.event;var b=a.target||a.srcElement,c;if(/ ed_button /.test(" "+b.className+" ")){d.canvas=f=document.getElementById(e);c=b.id.replace(g+"_","");d.theButtons[c]&&d.theButtons[c].callback.call(d.theButtons[c],b,f,d)}};h.addEventListener?h.addEventListener("click",i,!1):h.attachEvent&&h.attachEvent("onclick",i);d.getButton=function(a){return d.theButtons[a]};d.getButtonElement=function(a){return document.getElementById(g+"_"+a)};c.instances[e]=d;if(!c.instances[0]){c.instances[0]=c.instances[e];a(function(){c._buttonsInit()})}};c.instances={};c.getInstance=function(a){return c.instances[a]};c._buttonsInit=function(){var a=this,b,d,e,f,g,h,i,j,k,l,m=",strong,em,link,block,del,ins,img,ul,ol,li,code,more,spell,close,";for(h in a.instances){if(h==0)continue;i=a.instances[h];b=i.canvas;d=i.name;e=i.settings;g="";f={};l="";e.buttons&&(l=","+e.buttons+",");for(k in edButtons){if(!edButtons[k])continue;j=edButtons[k].id;if(l&&m.indexOf(","+j+",")!=-1&&l.indexOf(","+j+",")==-1)continue;if(!edButtons[k].instance||edButtons[k].instance==h){f[j]=edButtons[k];edButtons[k].html&&(g+=edButtons[k].html(d+"_"))}}if(l&&l.indexOf(",fullscreen,")!=-1){f.fullscreen=new c.FullscreenButton;g+=f.fullscreen.html(d+"_")}if("rtl"==document.getElementsByTagName("html")[0].dir){f.textdirection=new c.TextDirectionButton;g+=f.textdirection.html(d+"_")}i.toolbar.innerHTML=g;i.theButtons=f}a.buttonsInitDone=!0};c.addButton=function(a,b,d,e,f,g,h,i){var j;if(!a||!b)return;h=h||0;e=e||"";if(typeof d=="function"){j=new c.Button(a,b,f,g,i);j.callback=d}else{if(typeof d!="string")return;j=new c.TagButton(a,b,d,e,f,g,i)}if(h==-1)return j;if(h>0){while(typeof edButtons[h]!="undefined")h++;edButtons[h]=j}else edButtons[edButtons.length]=j;this.buttonsInitDone&&this._buttonsInit()};c.insertContent=function(a){var b,c,d,e,f,g=document.getElementById(wpActiveEditor);if(!g)return!1;if(document.selection){g.focus();b=document.selection.createRange();b.text=a;g.focus()}else if(g.selectionStart||g.selectionStart=="0"){f=g.value;c=g.selectionStart;d=g.selectionEnd;e=g.scrollTop;g.value=f.substring(0,c)+a+f.substring(d,f.length);g.focus();g.selectionStart=c+a.length;g.selectionEnd=c+a.length;g.scrollTop=e}else{g.value+=a;g.focus()}return!0};c.Button=function(a,b,c,d,e){var f=this;f.id=a;f.display=b;f.access=c;f.title=d||"";f.instance=e||""};c.Button.prototype.html=function(a){var b=this.access?' accesskey="'+this.access+'"':"";return'<input type="button" id="'+a+this.id+'"'+b+' class="ed_button" title="'+this.title+'" value="'+this.display+'" />'};c.Button.prototype.callback=function(){};c.TagButton=function(a,b,d,e,f,g,h){var i=this;c.Button.call(i,a,b,f,g,h);i.tagStart=d;i.tagEnd=e};c.TagButton.prototype=new c.Button;c.TagButton.prototype.openTag=function(a,b){var c=this;b.openTags||(b.openTags=[]);if(c.tagEnd){b.openTags.push(c.id);a.value="/"+a.value}};c.TagButton.prototype.closeTag=function(a,b){var c=this,d=c.isOpen(b);d!==!1&&b.openTags.splice(d,1);a.value=c.display};c.TagButton.prototype.isOpen=function(a){var b=this,c=0,d=!1;if(a.openTags)while(d===!1&&c<a.openTags.length){d=a.openTags[c]==b.id?c:!1;c++}else d=!1;return d};c.TagButton.prototype.callback=function(a,b,c){var d=this,e,f,g,h,i=b.value,j,k,l,m,n=i?d.tagEnd:"";if(document.selection){b.focus();m=document.selection.createRange();if(m.text.length>0)d.tagEnd?m.text=d.tagStart+m.text+n:m.text=m.text+d.tagStart;else if(!d.tagEnd)m.text=d.tagStart;else if(d.isOpen(c)===!1){m.text=d.tagStart;d.openTag(a,c)}else{m.text=n;d.closeTag(a,c)}b.focus()}else if(b.selectionStart||b.selectionStart=="0"){e=b.selectionStart;f=b.selectionEnd;g=f;h=b.scrollTop;j=i.substring(0,e);k=i.substring(f,i.length);l=i.substring(e,f);if(e!=f)if(!d.tagEnd){b.value=j+l+d.tagStart+k;g+=d.tagStart.length}else{b.value=j+d.tagStart+l+n+k;g+=d.tagStart.length+n.length}else if(!d.tagEnd){b.value=j+d.tagStart+k;g=e+d.tagStart.length}else if(d.isOpen(c)===!1){b.value=j+d.tagStart+k;d.openTag(a,c);g=e+d.tagStart.length}else{b.value=j+n+k;g=e+n.length;d.closeTag(a,c)}b.focus();b.selectionStart=g;b.selectionEnd=g;b.scrollTop=h}else{if(!n)b.value+=d.tagStart;else if(d.isOpen(c)!==!1){b.value+=d.tagStart;d.openTag(a,c)}else{b.value+=n;d.closeTag(a,c)}b.focus()}};c.SpellButton=function(){c.Button.call(this,"spell",quicktagsL10n.lookup,"",quicktagsL10n.dictionaryLookup)};c.SpellButton.prototype=new c.Button;c.SpellButton.prototype.callback=function(a,b,c){var d="",e,f,g;if(document.selection){b.focus();e=document.selection.createRange();e.text.length>0&&(d=e.text)}else if(b.selectionStart||b.selectionStart=="0"){f=b.selectionStart;g=b.selectionEnd;f!=g&&(d=b.value.substring(f,g))}d===""&&(d=prompt(quicktagsL10n.wordLookup,""));d!==null&&/^\w[\w ]*$/.test(d)&&window.open("http://www.answers.com/"+encodeURIComponent(d))};c.CloseButton=function(){c.Button.call(this,"close",quicktagsL10n.closeTags,"",quicktagsL10n.closeAllOpenTags)};c.CloseButton.prototype=new c.Button;c._close=function(a,b,c){var d,e,f=c.openTags;if(f)while(f.length>0){d=c.getButton(f[f.length-1]);e=document.getElementById(c.name+"_"+d.id);a?d.callback.call(d,e,b,c):d.closeTag(e,c)}};c.CloseButton.prototype.callback=c._close;c.closeAllTags=function(a){var b=this.getInstance(a);c._close("",b.canvas,b)};c.LinkButton=function(){c.TagButton.call(this,"link","link","","</a>","a")};c.LinkButton.prototype=new c.TagButton;c.LinkButton.prototype.callback=function(a,b,d,e){var f,g=this;if(typeof wpLink!="undefined"){wpLink.open();return}e||(e="http://");if(g.isOpen(d)===!1){f=prompt(quicktagsL10n.enterURL,e);if(f){g.tagStart='<a href="'+f+'">';c.TagButton.prototype.callback.call(g,a,b,d)}}else c.TagButton.prototype.callback.call(g,a,b,d)};c.ImgButton=function(){c.TagButton.call(this,"img","img","","","m")};c.ImgButton.prototype=new c.TagButton;c.ImgButton.prototype.callback=function(a,b,d,e){e||(e="http://");var f=prompt(quicktagsL10n.enterImageURL,e),g;if(f){g=prompt(quicktagsL10n.enterImageDescription,"");this.tagStart='<img src="'+f+'" alt="'+g+'" />';c.TagButton.prototype.callback.call(this,a,b,d)}};c.FullscreenButton=function(){c.Button.call(this,"fullscreen",quicktagsL10n.fullscreen,"f",quicktagsL10n.toggleFullscreen)};c.FullscreenButton.prototype=new c.Button;c.FullscreenButton.prototype.callback=function(a,b){if(!b.id||typeof fullscreen=="undefined")return;fullscreen.on()};c.TextDirectionButton=function(){c.Button.call(this,"textdirection",quicktagsL10n.textdirection,"",quicktagsL10n.toggleTextdirection)};c.TextDirectionButton.prototype=new c.Button;c.TextDirectionButton.prototype.callback=function(a,b){var c="rtl"==document.getElementsByTagName("html")[0].dir,d=b.style.direction;d||(d=c?"rtl":"ltr");b.style.direction="rtl"==d?"ltr":"rtl";b.focus()};edButtons[10]=new c.TagButton("strong","b","<strong>","</strong>","b");edButtons[20]=new c.TagButton("em","i","<em>","</em>","i"),edButtons[30]=new c.LinkButton,edButtons[40]=new c.TagButton("block","b-quote","\n\n<blockquote>","</blockquote>\n\n","q"),edButtons[50]=new c.TagButton("del","del",'<del datetime="'+b+'">',"</del>","d"),edButtons[60]=new c.TagButton("ins","ins",'<ins datetime="'+b+'">',"</ins>","s"),edButtons[70]=new c.ImgButton,edButtons[80]=new c.TagButton("ul","ul","<ul>\n","</ul>\n\n","u"),edButtons[90]=new c.TagButton("ol","ol","<ol>\n","</ol>\n\n","o"),edButtons[100]=new c.TagButton("li","li","	<li>","</li>\n","l"),edButtons[110]=new c.TagButton("code","code","<code>","</code>","c"),edButtons[120]=new c.TagButton("more","more","<!--more-->","","t"),edButtons[130]=new c.SpellButton,edButtons[140]=new c.CloseButton})();